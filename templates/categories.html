{% extends "base.html" %}

{% block content %}
<h1>‚ôªÔ∏è Kategorien & Umweltinfos</h1>

<style>
  .card {
    margin-bottom: 25px;
    padding: 20px;
    background: #ffffff;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.06);
  }

  .card h3 {
    margin-top: 0;
    margin-bottom: 10px;
  }

  .stars {
    font-size: 18px;
  }

  .material-list {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    padding-left: 0;
    list-style: none;
  }

  .material-item {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    color: white;
    font-weight: bold;
    font-size: 12px;
    cursor: pointer;
    text-align: center;
  }

  /* Tooltip */
  .material-item span.tooltip {
    visibility: hidden;
    width: 130px;
    background-color: #333;
    color: #fff;
    text-align: center;
    border-radius: 6px;
    padding: 5px;
    position: absolute;
    z-index: 10;
    bottom: 60px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 12px;
    opacity: 0;
    transition: opacity 0.3s;
  }

  .material-item:hover span.tooltip {
    visibility: visible;
    opacity: 1;
  }

  .link-button {
    display: inline-block;
    padding: 10px 15px;
    margin-top: 20px;
    background-color: #89CFF0;
    color: white;
    text-decoration: none;
    border-radius: 6px;
    font-weight: bold;
  }

  .link-button:hover {
    background-color: #5bb0e3;
  }

  /* Dynamische Hintergrundfarben */
  .material-item[data-color="#1e90ff"] { background-color: #1e90ff; }
  .material-item[data-color="#f1c40f"] { background-color: #f1c40f; }
  .material-item[data-color="#27ae60"] { background-color: #27ae60; }
  .material-item[data-color="#8e6e53"] { background-color: #8e6e53; }
  .material-item[data-color="gray"] { background-color: gray; }
</style>

{% for name, data in categories.items() %}
<div class="card">

  <h3>{{ name }}</h3>

  <p>üåç {{ data.description | default('Keine Beschreibung verf√ºgbar') }}</p>

  <p>üí® <b>CO‚ÇÇ:</b> {{ data.co2 | default('Noch keine Daten vorhanden') }}</p>

  <p>‚≠ê <b>Punkte:</b> {{ data.points | default(0) }}</p>

  <p>‚ôªÔ∏è <b>Tipp:</b> {{ data.tip | default('Kein Tipp verf√ºgbar') }}</p>

  <!-- Sterne-Ranking -->
  <p>
    üå± <b>Umwelt-Ranking:</b>
    {% if data.score is defined and data.score is integer %}
        <span class="stars">
        {% for i in range(data.score) %}
            <span style="color: gold;">‚≠ê</span>
        {% endfor %}
        {% for i in range(5 - data.score) %}
            <span style="color: lightgray;">‚≠ê</span>
        {% endfor %}
        </span>
    {% else %}
        Kein Ranking verf√ºgbar
    {% endif %}
  </p>

  <!-- Materialien -->
  <h4>Materialien</h4>
  {% if data.materials is defined and data.materials | length > 0 %}
    <ul class="material-list">
      {% for material in data.materials %}
        {% set status = '‚úÖ recyclebar' if material.present else '‚ùå nicht recyclebar' %}
        <li class="material-item" data-color="{{ material.color | default('gray') }}">
          {{ material.name[:3] | upper }}
          <span class="tooltip">{{ status }}</span>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>Keine Materialien verf√ºgbar</p>
  {% endif %}

</div>
{% endfor %}

<!-- Zur√ºck-Button -->
<a href="{{ url_for('index') }}" class="link-button">‚¨Ö Zur√ºck</a>

{% endblock %}
